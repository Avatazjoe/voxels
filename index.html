<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="icon" href="favicon.ico" />

        <title>Voxels <-> slexoV</title>
        <meta name="description" content="voxels">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.0/themes/dot-luv/jquery-ui.min.css">
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>

    </head>
    <body>
    <div id="dialog" title="Voxels <-> slexoV">
        <p>Click and drag to interact.</p>
        <p>Scroll / pinch to zoom.</p>
        <p>Double click / tap to hide UI.</p>
    </div>
    <div id="gui" class="gui-container">
        <div>
            <button id="previous"><</button>
            <button id="next">></button>
            <button id="screenshot">screenshot</button>
            <button id="fullscreen">fullscreen</button>
            <button id="showHelp">?</button>
        </div>
    </div>
    <div id="main"></div>

    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r70/three.js"></script>
    <script type="text/javascript" src="js/lib/threex.windowresize.js"></script>
    <script type="text/javascript" src="js/lib/THREEx.FullScreen.js"></script>
    <script id="shader-fs" type="x-shader/x-fragment">#ifdef GL_ES
#extension GL_OES_standard_derivatives : enable
#endif

uniform vec4 u_color;
uniform vec4 u_borderColor;
uniform float u_borderWidth;

varying float v_centerFlag;

float edgeFactor(const float thickness, const float centerFlag)
{
    return smoothstep(0.0, fwidth(centerFlag)*thickness, centerFlag);
}

void main()
{
    float f = edgeFactor(u_borderWidth, v_centerFlag);
    gl_FragColor = vec4 (
        mix(
            u_borderColor,
            u_color,
            f).rgb,
        1.0
    );
}
    </script>
    <script id="shader-vs" type="x-shader/x-vertex">#ifdef GL_ES
#extension GL_OES_standard_derivatives : enable
#endif

attribute float a_centerFlag;
attribute vec3 a_normal;

uniform mat4 u_mvpMat;
uniform float u_time;

varying float v_centerFlag;

void main()
{
    gl_Position = u_mvpMat * vec4(position, 1.0);
    v_centerFlag = a_centerFlag;
}
    </script>
    <script id="shader-pick-fs" type="x-shader/x-fragment">#ifdef GL_ES
#extension GL_OES_standard_derivatives : enable
#endif

varying vec3 v_color;

void main()
{
    gl_FragColor = vec4 ( v_color, 1.0 );
}
    </script>
    <script id="shader-pick-vs" type="x-shader/x-vertex">#ifdef GL_ES
#extension GL_OES_standard_derivatives : enable
#endif

attribute vec3 a_normal;
attribute vec3 a_pickColor;

uniform mat4 u_mvpMat;
uniform float u_time;

varying vec3 v_color;

vec3 unpackColor(float f) {
    vec3 color;
    color.b = floor(f / 256.0 / 256.0);
    color.g = floor((f - color.b * 256.0 * 256.0) / 256.0);
    color.r = floor(f - color.b * 256.0 * 256.0 - color.g * 256.0);
    // now we have a vec3 with the 3 components in range [0..256]. Let's normalize it!
    return color / 256.0;
}

void main()
{
    gl_Position = u_mvpMat * vec4(position, 1.0);
    // v_color = unpackColor(a_pickColor);
    v_color = a_pickColor;
}
    </script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/seedrandom/2.3.10/seedrandom.min.js"></script>
    <script type="text/javascript" src="http://hammerjs.github.io/dist/hammer.min.js"></script>
    <script type="text/javascript" src="target/scala-2.11/sphere-maze-opt.js"></script>
    <script type="text/javascript" src="js/threeApp.js"></script>
</body>
</html>